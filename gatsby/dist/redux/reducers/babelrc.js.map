{"version":3,"sources":["../../../src/redux/reducers/babelrc.js"],"names":["_","require","module","exports","state","stages","develop","plugins","presets","options","cacheDirectory","babelrc","sourceType","action","type","Object","keys","forEach","stage","payload","index","findIndex","p","name","plugin","merge"],"mappings":"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","sourcesContent":["const _ = require(`lodash`)\n\nmodule.exports = (\n  state = {\n    stages: {\n      develop: {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n          sourceType: `unambiguous`,\n        },\n      },\n      \"develop-html\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n          sourceType: `unambiguous`,\n        },\n      },\n      \"build-html\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n          sourceType: `unambiguous`,\n        },\n      },\n      \"build-javascript\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n          sourceType: `unambiguous`,\n        },\n      },\n    },\n  },\n  action\n) => {\n  switch (action.type) {\n    case `SET_BABEL_PLUGIN`: {\n      Object.keys(state.stages).forEach(stage => {\n        if (action.payload.stage && action.payload.stage !== stage) {\n          return\n        }\n\n        const index = _.findIndex(\n          state.stages[stage].plugins,\n          p => p.name === action.payload.name\n        )\n        // If the plugin already exists, merge the options.\n        // Otherwise, add it to the end.\n        if (index !== -1) {\n          const plugin = state.stages[stage].plugins[index]\n          state.stages[stage].plugins[index] = {\n            name: plugin.name,\n            options: _.merge(plugin.options, action.payload.options),\n          }\n        } else {\n          state.stages[stage].plugins = [\n            ...state.stages[stage].plugins,\n            action.payload,\n          ]\n        }\n      })\n\n      return state\n    }\n    case `SET_BABEL_PRESET`: {\n      Object.keys(state.stages).forEach(stage => {\n        if (action.payload.stage && action.payload.stage !== stage) {\n          return\n        }\n\n        const index = _.findIndex(\n          state.stages[stage].presets,\n          p => p.name === action.payload.name\n        )\n        // If the plugin already exists, merge the options.\n        // Otherwise, add it to the end.\n        if (index !== -1) {\n          const plugin = state.stages[stage].presets[index]\n          state.stages[stage].presets[index] = {\n            name: plugin.name,\n            options: _.merge(plugin.options, action.payload.options),\n          }\n        } else {\n          state.stages[stage].presets = [\n            ...state.stages[stage].presets,\n            action.payload,\n          ]\n        }\n      })\n      return state\n    }\n    case `SET_BABEL_OPTIONS`: {\n      Object.keys(state.stages).forEach(stage => {\n        if (action.payload.stage && action.payload.stage !== stage) {\n          return\n        }\n\n        state.stages[stage].options = {\n          ...state.stages[stage].options,\n          ...action.payload.options,\n        }\n      })\n      return state\n    }\n  }\n\n  return state\n}\n"],"file":"babelrc.js"}